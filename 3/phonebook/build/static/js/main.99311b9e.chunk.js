(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(20),t(2)),l=t(4),s=t(3),i=t.n(s),m=function(){return i.a.get("/api/phonebook").then((function(e){return e.data}))},f=function(e){return i.a.post("".concat("/api/persons"),e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat("/api/persons","/").concat(e),n).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat("/api/persons","/").concat(e)).then((function(e){return e.data}))},b=function(e){var n=e.persons,t=e.setPersons,a=e.newName,o=e.setNewName,c=e.newNumber,u=e.setNewNumber,s=e.setMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r={name:a,number:c};if(n.some((function(e){return e.name===a}))){if(window.confirm("".concat(a," is already added to phonebook, replace the old number with a new one?"))){var i=n.find((function(e){return e.name===a})),m=Object(l.a)({},i,{number:c});d(i.id,m).then((function(e){t(n.map((function(n){return n!==i?n:e}))),s(["Changed the number of ".concat(e.name),!1]),setTimeout((function(){s([null,!1])}),5e3)})).catch((function(e){s(["Information of "+i.name+" has already been removed from server",!0]),t(n.filter((function(e){return e.name!==a})))}))}}else f(r).then((function(e){t(n.concat(e))})).catch((function(e){console.log(e.response.data),s([e.response.data.error,!0])})),s(["Added ".concat(r.name),!1]),setTimeout((function(){s([null,!1])}),5e3);o(""),u("")}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},p=function(e){var n=e.persons,t=e.searchTerm,a=e.showAll,o=e.setPersons,c=a?n:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())}));return r.a.createElement("ul",null,c.map((function(e,t){return r.a.createElement("p",{key:t},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return t=e.id,void(window.confirm("Delete ".concat(t,"?"))&&h(t).then((function(e){console.log(n),o(n.filter((function(e){return e.id!==t})))})));var t}},"delete"))})))},v=function(e){var n=e.setShowAll,t=e.searchTerm,a=e.setSearchTerm;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:t,onChange:function(e){a(e.target.value),e.target.value.length>0?n(!1):n(!0)}}))},E=function(e){var n=e.message,t={color:"green",background:"lightgrey",fontSize:15,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},a=Object(l.a)({},t,{color:"red"});return null===n[0]?null:!0===n[1]?r.a.createElement("div",{style:a,className:"message"},n):r.a.createElement("div",{style:t,className:"message"},n)},g=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(!0),l=Object(u.a)(c,2),s=l[0],i=l[1],f=Object(a.useState)(""),d=Object(u.a)(f,2),h=d[0],g=d[1],w=Object(a.useState)(""),j=Object(u.a)(w,2),N=j[0],O=j[1],S=Object(a.useState)(""),k=Object(u.a)(S,2),y=k[0],T=k[1],C=Object(a.useState)([null,!1]),A=Object(u.a)(C,2),P=A[0],M=A[1];return Object(a.useEffect)((function(){m().then((function(e){o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:P}),r.a.createElement(v,{setShowAll:i,searchTerm:h,setSearchTerm:g}),r.a.createElement("h3",null,"add a new"),r.a.createElement(b,{persons:t,setPersons:o,newName:N,setNewName:O,newNumber:y,setNewNumber:T,setMessage:M}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:t,searchTerm:h,showAll:s,setPersons:o}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.99311b9e.chunk.js.map