{"version":3,"sources":["services/persons.js","components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["axios","get","then","response","data","newObject","post","id","put","delete","PersonForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setMessage","onSubmit","event","preventDefault","nameObject","name","number","some","e","window","confirm","person","find","p","personUpdate","personService","returnedPerson","map","setTimeout","catch","error","filter","concat","console","log","value","onChange","target","type","Persons","searchTerm","showAll","peopleToShow","toUpperCase","includes","i","key","onClick","res","Filter","setShowAll","setSearchTerm","length","Notification","message","messageStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","style","className","App","useState","useEffect","initialPersons","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.99311b9e.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get('/api/phonebook')\r\n  return request.then(response => response.data)\r\n  //return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(`${baseUrl}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, del }","import React from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst PersonForm = ({persons, setPersons, newName, setNewName, newNumber, setNewNumber, setMessage}) => {\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    const nameObject = { name: newName,\r\n                         number: newNumber, }\r\n\r\n    if (persons.some(e => e.name === newName)){\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const person = persons.find(p => p.name === newName)\r\n        const personUpdate = { ...person, number: newNumber }\r\n        personService\r\n          .update(person.id, personUpdate)\r\n          .then(returnedPerson => {\r\n            // console.log(returnedPerson)\r\n            setPersons(persons.map(p => p !== person ? p : returnedPerson))\r\n            \r\n            setMessage([`Changed the number of ${returnedPerson.name}`, false])\r\n            setTimeout(() => {\r\n              setMessage([null, false])\r\n            }, 5000)\r\n          })\r\n          .catch(error => {\r\n            setMessage(['Information of ' + person.name + ' has already been removed from server', true])\r\n            setPersons(persons.filter(p => p.name !== newName))\r\n          })\r\n      }\r\n    }\r\n    else {\r\n      /* axios.post(\r\n        'http://localhost:3001/persons',\r\n        nameObject)\r\n        .then(response => {\r\n          console.log(response)\r\n        }) */\r\n      personService\r\n      .create(nameObject)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n      })\r\n      .catch(error => {\r\n        console.log(error.response.data)\r\n        setMessage([error.response.data.error, true])\r\n      })\r\n      // console.log(persons)\r\n      setMessage([`Added ${nameObject.name}`, false])\r\n      setTimeout(() => {\r\n        setMessage([null, false])\r\n      }, 5000)\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={addName}>\r\n        <div>name: <input value={newName} onChange={handleNameChange}/></div>\r\n        <div>number: <input value={newNumber} onChange={handleNumberChange}/></div>\r\n        <div><button type=\"submit\">add</button></div>\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst Persons = ({persons, searchTerm, showAll, setPersons}) => {\r\n  const peopleToShow = showAll\r\n    ? persons\r\n    : persons.filter(person => person.name.toUpperCase().includes(searchTerm.toUpperCase()))\r\n\r\n  const handleClick = (id) => {\r\n    if (window.confirm(`Delete ${id}?`)) {\r\n      personService\r\n        .del(id)\r\n        .then((res) => {\r\n          console.log(persons)\r\n          setPersons(persons.filter(p => p.id !== id))\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ul>\r\n      {peopleToShow.map((person, i) =>\r\n      <p key={i}>{person.name} {person.number} <button onClick={() => handleClick(person.id)}>delete</button></p>\r\n      )}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({setShowAll, searchTerm, setSearchTerm}) => { \r\n  const handleSearch = (event) => {\r\n    setSearchTerm(event.target.value)\r\n    if (event.target.value.length > 0) {\r\n      setShowAll(false)\r\n    }\r\n    else setShowAll(true)\r\n  }\r\n  return (\r\n    <div>\r\n      filter shown with <input value={searchTerm} onChange={handleSearch} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    const messageStyle = {\r\n        color: 'green',\r\n        background: 'lightgrey',\r\n        fontSize: 15,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10\r\n    }\r\n\r\n    const errorStyle = {\r\n        ...messageStyle,\r\n        color: 'red'\r\n    }\r\n\r\n    if (message[0] === null) {\r\n        return null\r\n    }\r\n\r\n    else if (message[1] === true) {\r\n        return (\r\n            <div style={errorStyle} className=\"message\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    else return (\r\n        <div style={messageStyle} className=\"message\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n// import { isCompositeComponent } from 'react-dom/test-utils'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ showAll, setShowAll ] = useState(true)\n  const [ searchTerm, setSearchTerm ] = useState('')\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ message, setMessage ] = useState([null, false])\n\n  useEffect(() => {\n    /* axios\n        .get(\"http://localhost:3001/persons\")\n        .then(response => {\n          setPersons(response.data)\n        }) */\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter setShowAll={setShowAll} searchTerm={searchTerm} setSearchTerm={setSearchTerm} />\n\n      <h3>add a new</h3>\n      <PersonForm persons={persons} setPersons={setPersons} newName={newName} setNewName={setNewName} newNumber={newNumber} setNewNumber={setNewNumber} setMessage={setMessage} />\n      \n      <h3>Numbers</h3>\n      <Persons persons={persons} searchTerm={searchTerm} showAll={showAll} setPersons={setPersons} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}